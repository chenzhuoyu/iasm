<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>MSMON_CFG_CSU_CTL</title><link href="insn.css" rel="stylesheet" type="text/css"/></head><body><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old">(old) </td><td class="explain">htmldiff from-</td><td class="new">(new) </td></tr></tbody></table></div><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr/><h1 class="register-section">MSMON_CFG_CSU_CTL, MPAM Memory System Monitor Configure Cache Storage Usage Monitor Control Register</h1><p>The MSMON_CFG_CSU_CTL characteristics are:</p><h2>Purpose</h2><p>Controls the CSU monitor selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.</p><p>MSMON_CFG_CSU_CTL_s controls the Secure cache storage usage monitor instance selected by the Secure instance of <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.
MSMON_CFG_CSU_CTL_ns controls Non-secure cache storage usage monitor instance selected by the Non-secure instance of <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.
MSMON_CFG_CSU_CTL_rt controls the monitor configuration for the Root PARTID selected by the Root instance of <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.
MSMON_CFG_CSU_CTL_rl controls the monitor configuration for the Realm PARTID selected by the Realm instance of <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.</p><p>If <a href="ext-mpamf_idr.html">MPAMF_IDR</a>.HAS_RIS is 1, the monitor instance configuration accessed is for the resource instance currently selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.RIS and the monitor instance of that resource instance selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.MON_SEL.</p><h2>Configuration</h2><p><ins>The power domain of MSMON_CFG_CSU_CTL is </ins><span class="arm-defined-word"><ins>IMPLEMENTATION DEFINED</ins></span><ins>.
    </ins></p><p>This register is present only when FEAT_MPAM is implemented, MPAMF_IDR.HAS_MSMON == 1 and MPAMF_MSMON_IDR.MSMON_CSU == 1. Otherwise, direct accesses to MSMON_CFG_CSU_CTL are <span class="arm-defined-word">RES0</span>.</p><p>The power and reset domain of each MSC component is specific to that component.</p><h2>Attributes</h2><p>MSMON_CFG_CSU_CTL is a 32-bit register.</p><h2>Field descriptions</h2><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr" colspan="1"><a href="#fieldset_0-31_31">EN</a></td><td class="lr" colspan="3"><a href="#fieldset_0-30_28">CAPT_EVNT</a></td><td class="lr" colspan="1"><a href="#fieldset_0-27_27">CAPT_RESET</a></td><td class="lr" colspan="1"><a href="#fieldset_0-26_26">OFLOW_STATUS</a></td><td class="lr" colspan="1"><a href="#fieldset_0-25_25">OFLOW_INTR</a></td><td class="lr" colspan="1"><a href="#fieldset_0-24_24">OFLOW_FRZ</a></td><td class="lr" colspan="1"><a href="#fieldset_0-23_23-1">OFLOW_CAPT</a></td><td class="lr" colspan="3"><a href="#fieldset_0-22_20">SUBTYPE</a></td><td class="lr" colspan="1"><a href="#fieldset_0-19_19">RES0</a></td><td class="lr" colspan="1"><a href="#fieldset_0-18_18-1">CEVNT_OFLW</a></td><td class="lr" colspan="1"><a href="#fieldset_0-17_17">MATCH_PMG</a></td><td class="lr" colspan="1"><a href="#fieldset_0-16_16">MATCH_PARTID</a></td><td class="lr" colspan="5"><a href="#fieldset_0-15_11">RES0</a></td><td class="lr" colspan="3"><a href="#fieldset_0-10_8-1">OFLOW_LNKG</a></td><td class="lr" colspan="8"><a href="#fieldset_0-7_0">TYPE</a></td></tr></tbody></table><h4 id="fieldset_0-31_31">EN, bit [31]</h4><div class="field"><p>Enabled.</p><table class="valuetable"><tr><th>EN</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>The monitor instance is disabled and must not collect any information.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>The monitor instance is enabled to collect information according to the configuration of the instance.</p></td></tr></table></div><h4 id="fieldset_0-30_28">CAPT_EVNT, bits [30:28]</h4><div class="field"><p>Capture event selector.</p><p>Select the event that triggers capture from the following:</p><table class="valuetable"><tr><th>CAPT_EVNT</th><th>Meaning</th></tr><tr><td class="bitfield">0b000</td><td><p>No capture event is triggered.</p></td></tr><tr><td class="bitfield">0b001</td><td><p>External capture event 1 (optional, but recommended)</p></td></tr><tr><td class="bitfield">0b010</td><td><p>External capture event 2 (optional)</p></td></tr><tr><td class="bitfield">0b011</td><td><p>External capture event 3 (optional)</p></td></tr><tr><td class="bitfield">0b100</td><td><p>External capture event 4 (optional)</p></td></tr><tr><td class="bitfield">0b101</td><td><p>External capture event 5 (optional)</p></td></tr><tr><td class="bitfield">0b110</td><td><p>External capture event 6 (optional)</p></td></tr><tr><td class="bitfield">0b111</td><td><p>Capture occurs when a MSMON_CAPT_EVNT register in this MSC is written and causes a capture event for the Security state of this monitor. (optional)</p></td></tr></table><p>The values marked as optional indicate capture event sources that can be omitted in an implementation. Those values representing non-implemented event sources must not trigger a capture event.</p><p>When MPAMF_CSUMON_IDR.HAS_CAPTURE == 0, access to this field is <span class="access_level">RAZ/WI</span>.</p></div><h4 id="fieldset_0-27_27">CAPT_RESET, bit [27]</h4><div class="field"><p>Reset after capture.</p><p>Controls whether the value of <a href="ext-msmon_csu.html">MSMON_CSU</a> is reset to zero immediately after being copied to <a href="ext-msmon_csu_capture.html">MSMON_CSU_CAPTURE</a>.</p><table class="valuetable"><tr><th>CAPT_RESET</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>Monitor is not reset on capture.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>Monitor is reset on capture.</p></td></tr></table><p>Because the CSU monitor type produces a measurement rather than a count, it might not make sense to ever reset the value after a capture. If there is no reason to ever reset a CSU monitor, this field is RAZ/WI.</p><p>When MPAMF_CSUMON_IDR.HAS_CAPTURE == 0, access to this field is <span class="access_level">RAZ/WI</span>.</p></div><h4 id="fieldset_0-26_26">OFLOW_STATUS, bit [26]</h4><div class="field"><p>Overflow status.</p><p>Indicates whether the value of <a href="ext-msmon_csu.html">MSMON_CSU</a> has overflowed.</p><p>If <a href="ext-mpamf_csumon_idr.html">MPAMF_CSUMON_IDR</a>.HAS_CEVNT_OFLW is 1 or <a href="ext-mpamf_csumon_idr.html">MPAMF_CSUMON_IDR</a>.HAS_OFLOW_LNKG is 1, then a store to <a href="ext-msmon_csu.html">MSMON_CSU</a> when this field is 1 resets this field to 0.</p><table class="valuetable"><tr><th>OFLOW_STATUS</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>No overflow has occurred.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>At least one overflow has occurred since this bit was last written to zero.</p></td></tr></table><p>If overflow is not possible for a CSU monitor in the implementation, this field is RAZ/WI.</p></div><h4 id="fieldset_0-25_25">OFLOW_INTR, bit [25]</h4><div class="field"><p>Overflow Interrupt.</p><p>Controls whether an overflow interrupt is generated when the value of <a href="ext-msmon_csu.html">MSMON_CSU</a> has overflowed.</p><table class="valuetable"><tr><th>OFLOW_INTR</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>No interrupt is signaled on an overflow of <a href="ext-msmon_csu.html">MSMON_CSU</a>.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>On overflow, an implementation-specific interrupt is signaled.</p></td></tr></table><p>When MSMON_CFG_CSU_CTL.OFLOW_INTR == 0, access to this field is <span class="access_level">RAZ/WI</span>.</p></div><h4 id="fieldset_0-24_24">OFLOW_FRZ, bit [24]</h4><div class="field"><p>Freeze Monitor on Overflow.</p><p>Controls whether the value of <a href="ext-msmon_csu.html">MSMON_CSU</a>.VALUE freezes on an overflow.</p><table class="valuetable"><tr><th>OFLOW_FRZ</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>Monitor count wraps on overflow.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>Monitor count freezes on overflow. The frozen value might be 0 or another value if the monitor overflowed with an increment larger than 1.</p></td></tr></table><p>If overflow is not possible for a CSU monitor in the implementation, this field is RAZ/WI.</p><p>When a <a href="ext-msmon_csu.html">MSMON_CSU</a>.VALUE of a monitor instance is frozen it does not change until <a href="ext-msmon_csu.html">MSMON_CSU</a> register for that instance has been written.</p></div><h4 id="fieldset_0-23_23-1">OFLOW_CAPT, bit [23]<span class="condition"><br/>When (FEAT_MPAMv0p1 is implemented or FEAT_MPAMv1p1 is implemented) and MPAMF_CSUMON_IDR.HAS_OFLOW_CAPT == 1:
                        </span></h4><div class="field"><p>Capture Monitor on Overflow.</p><table class="valuetable"><tr><th>OFLOW_CAPT</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>Monitor is not captured on an overflow or when affected by an overflow linkage event.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>Monitor is captured and the <a href="ext-msmon_csu.html">MSMON_CSU</a>.{NRDY, VALUE} fields are copied to the monitor instance's capture register on an overflow or when affected by an overflow linkage event. The monitor instance treats an overflow of this monitor instance as a private capture event. If <a href="ext-msmon_cfg_mbwu_ctl.html">MSMON_CFG_MBWU_CTL</a>.CEVNT_OFLW is 1, this monitor instance also treats an overflow linkage event as a capture event.</p><p>If the OFLOW_FRZ field is 1, the monitor does not continue to count after the overflow or overflow linkage event. If the CAPT_RESET field is 1, the monitor instance resets to 0.</p></td></tr></table></div><h4 id="fieldset_0-23_23-2"><span class="condition"><br/>Otherwise:
                        </span></h4><div class="field"><p>Reserved, <span class="arm-defined-word">RES0</span>.</p></div><h4 id="fieldset_0-22_20">SUBTYPE, bits [22:20]</h4><div class="field"><p>Subtype. Type of cache storage usage counted by this monitor.</p><p>This field is not currently used for CSU monitors, but reserved for future use.</p><p>This field is RAZ/WI.</p></div><h4 id="fieldset_0-19_19">Bit [19]</h4><div class="field"><p>Reserved, <span class="arm-defined-word">RES0</span>.</p></div><h4 id="fieldset_0-18_18-1">CEVNT_OFLW, bit [18]<span class="condition"><br/>When (FEAT_MPAMv0p1 is implemented or FEAT_MPAMv1p1 is implemented) and MPAMF_CSUMON_IDR.HAS_CEVNT_OFLW == 1:
                        </span></h4><div class="field"><p>Capture Event performs overflow behavior.</p><table class="valuetable"><tr><th>CEVNT_OFLW</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>On a capture event matching the CAPT_EVNT field, the capture behaviors are performed.</p><p>The <a href="ext-msmon_csu.html">MSMON_CSU</a>.{VALUE, NRDY} fields are transferred to the monitor instance's capture register.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>On a capture event matching the CAPT_EVNT field, the monitor instance treats a capture event as an overflow and the overflow behaviors are performed.</p><p>The behavior is controlled by the MSMON_CFG_CSU_CTL.{OFLOW_FRZ, OFLOW_CAPT, CAPT_RESET} fields. The MSMON_CFG_CSU_CTL.OFLOW_STATUS field is set for this monitor instance.</p></td></tr></table></div><h4 id="fieldset_0-18_18-2"><span class="condition"><br/>Otherwise:
                        </span></h4><div class="field"><p>Reserved, <span class="arm-defined-word">RES0</span>.</p></div><h4 id="fieldset_0-17_17">MATCH_PMG, bit [17]</h4><div class="field"><p>Match PMG.</p><p>Controls whether the monitor measures only storage used with PMG matching <a href="ext-msmon_cfg_csu_flt.html">MSMON_CFG_CSU_FLT</a>.PMG.</p><table class="valuetable"><tr><th>MATCH_PMG</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>The monitor measures storage used with any PMG value.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>The monitor only measures storage used with the PMG value matching <a href="ext-msmon_cfg_csu_flt.html">MSMON_CFG_CSU_FLT</a>.PMG.</p></td></tr></table><p>If MATCH_PMG is 1 and MATCH_PARTID is 0, it is <span class="arm-defined-word">CONSTRAINED UNPREDICTABLE</span> whether the monitor instance:</p><ul><li>Measures the storage used with matching PMG and with any PARTID.
</li><li>Measures no storage usage, that is, <a href="ext-msmon_csu.html">MSMON_CSU</a>.VALUE is zero.
</li><li>Measures the storage used with matching PMG and PARTID, that is, treats MATCH_PARTID as == 1.
</li></ul></div><h4 id="fieldset_0-16_16">MATCH_PARTID, bit [16]</h4><div class="field"><p>Match PARTID.</p><p>Controls whether the monitor measures only storage used with PARTID matching <a href="ext-msmon_cfg_csu_flt.html">MSMON_CFG_CSU_FLT</a>.PARTID.</p><table class="valuetable"><tr><th>MATCH_PARTID</th><th>Meaning</th></tr><tr><td class="bitfield">0b0</td><td><p>The monitor measures storage used with any PARTID value.</p></td></tr><tr><td class="bitfield">0b1</td><td><p>The monitor only measures storage used with the PARTID value matching <a href="ext-msmon_cfg_csu_flt.html">MSMON_CFG_CSU_FLT</a>.PARTID.</p></td></tr></table></div><h4 id="fieldset_0-15_11">Bits [15:11]</h4><div class="field"><p>Reserved, <span class="arm-defined-word">RES0</span>.</p></div><h4 id="fieldset_0-10_8-1">OFLOW_LNKG, bits [10:8]<span class="condition"><br/>When (FEAT_MPAMv0p1 is implemented or FEAT_MPAMv1p1 is implemented) and MPAMF_CSUMON_IDR.HAS_OFLOW_LNKG == 1:
                        </span></h4><div class="field"><p>Overflow linkage event.</p><p>Controls signaling of a capture event on overflow of this monitor instance.</p><table class="valuetable"><tr><th>OFLOW_LNKG</th><th>Meaning</th></tr><tr><td class="bitfield">0b000</td><td><p>Overflow of the monitor instance only affects this monitor instance.</p></td></tr><tr><td class="bitfield">0b001</td><td><p>Overflow of this monitor instance signals Capture Event 1.</p></td></tr><tr><td class="bitfield">0b010</td><td><p>Overflow of this monitor instance signals Capture Event 2.</p></td></tr><tr><td class="bitfield">0b011</td><td><p>Overflow of this monitor instance signals Capture Event 3.</p></td></tr><tr><td class="bitfield">0b100</td><td><p>Overflow of this monitor instance signals Capture Event 4.</p></td></tr><tr><td class="bitfield">0b101</td><td><p>Overflow of this monitor instance signals Capture Event 5.</p></td></tr><tr><td class="bitfield">0b110</td><td><p>Overflow of this monitor instance signals Capture Event 6.</p></td></tr><tr><td class="bitfield">0b111</td><td><p>Reserved.</p></td></tr></table></div><h4 id="fieldset_0-10_8-2"><span class="condition"><br/>Otherwise:
                        </span></h4><div class="field"><p>Reserved, <span class="arm-defined-word">RES0</span>.</p></div><h4 id="fieldset_0-7_0">TYPE, bits [7:0]</h4><div class="field"><p>Monitor Type Code. The CSU monitor is TYPE = <span class="hexnumber">0x43</span>.</p><p>TYPE is a read-only constant indicating the type of the monitor.</p><p>Reads as <span class="hexnumber">0x43</span>.</p><p>Access to this field is <span class="access_level">RO</span>.</p></div><h2>Accessing MSMON_CFG_CSU_CTL</h2><p>This register is within the MPAM feature page memory frames.</p><p>In a system that supports Secure, Non-secure, Root, and Realm memory maps, there must be MPAM feature pages in all four address maps:</p><ul><li>MSMON_CFG_CSU_CTL_s must only be accessible from the Secure MPAM feature page.
</li><li>MSMON_CFG_CSU_CTL_ns must only be accessible from the Non-secure MPAM feature page.
</li><li>MSMON_CFG_CSU_CTL_rt must only be accessible from the Root MPAM feature page.
</li><li>MSMON_CFG_CSU_CTL_rl must only be accessible from the Realm MPAM feature page.
</li></ul><p>MSMON_CFG_CSU_CTL_s, MSMON_CFG_CSU_CTL_ns, MSMON_CFG_CSU_CTL_rt, and MSMON_CFG_CSU_CTL_rl must be separate registers:</p><ul><li>The Secure instance (MSMON_CFG_CSU_CTL_s) accesses the cache storage usage monitor controls used for Secure PARTIDs.
</li><li>The Non-secure instance (MSMON_CFG_CSU_CTL_ns) accesses the cache storage usage monitor controls used for Non-secure PARTIDs.
</li><li>The Root instance (MSMON_CFG_CSU_CTL_rt) accesses the cache storage usage monitor controls used for Root PARTIDs.
</li><li>The Realm instance (MSMON_CFG_CSU_CTL_rl) accesses the cache storage usage monitor controls used for Realm PARTIDs.
</li></ul><p>When RIS is implemented, loads and stores to MSMON_CFG_CSU_CTL access the cache storage usage monitor configuration settings for the cache resource instance selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.RIS and the cache storage usage monitor instance selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.MON_SEL.</p><p>When RIS is not implemented, loads and stores to MSMON_CFG_CSU_CTL access the cache storage usage monitor configuration settings for the cache storage usage monitor instance selected by <a href="ext-msmon_cfg_mon_sel.html">MSMON_CFG_MON_SEL</a>.MON_SEL.</p><h4>MSMON_CFG_CSU_CTL can be accessed through the memory-mapped interfaces:</h4><table class="info"><tr><th>Component</th><th>Frame</th><th>Offset</th><th>Instance</th></tr><tr><td>MPAM</td><td>MPAMF_BASE_s</td><td><span class="hexnumber">0x0818</span></td><td>MSMON_CFG_CSU_CTL_s</td></tr></table><p>Accesses on this interface are <span class="access_level">RW</span>.</p><table class="info"><tr><th>Component</th><th>Frame</th><th>Offset</th><th>Instance</th></tr><tr><td>MPAM</td><td>MPAMF_BASE_ns</td><td><span class="hexnumber">0x0818</span></td><td>MSMON_CFG_CSU_CTL_ns</td></tr></table><p>Accesses on this interface are <span class="access_level">RW</span>.</p><table class="info"><tr><th>Component</th><th>Frame</th><th>Offset</th><th>Instance</th></tr><tr><td>MPAM</td><td>MPAMF_BASE_rt</td><td><span class="hexnumber">0x0818</span></td><td>MSMON_CFG_CSU_CTL_rt</td></tr></table><p>When FEAT_RME is implemented, accesses on this interface are <span class="access_level">RW</span>.</p><table class="info"><tr><th>Component</th><th>Frame</th><th>Offset</th><th>Instance</th></tr><tr><td>MPAM</td><td>MPAMF_BASE_rl</td><td><span class="hexnumber">0x0818</span></td><td>MSMON_CFG_CSU_CTL_rl</td></tr></table><p>When FEAT_RME is implemented, accesses on this interface are <span class="access_level">RW</span>.</p><hr class="bottom_line"/><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions"><ins>30</ins><del>28</del>/03/2023 <ins>19</ins><del>16</del>:<ins>07</ins><del>02</del>; <ins>997dd0cf3258cacf72aa7cf7a885f19a4758c3af</ins><del>72747e43966d6b97dcbd230a1b3f0421d1ea3d94</del></p><p class="copyconf">Copyright © 2010-2023 Arm Limited or its affiliates. All rights reserved. This document is Non-Confidential.</p><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old">(old) </td><td class="explain">htmldiff from-</td><td class="new">(new) </td></tr></tbody></table></div></body></html>